#!/system/bin/sh

#GET USER PREFERENCES
echo "*********************************************"
echo "**Configurator for Mosh-Kernel for i9105(P)**"
echo "*********************************************"
echo
echo

# zram
continue=0
while [ $continue == 0 ]; do
  echo "Do you want to enable zRam?(1=yes/0=no)"
  read zRam
  if [ $zRam == 1 || $zRam == 0 ]; then
    echo "zRam: "$zRam
    continue=1
  else
    echo  $zRam "is not a valid answer."
  fi
  sleep 1
done

# zramdisk size
continue=0
while [ $continue == 0 && $zRam == 0 ]; then
  echo 
  echo "How big do you want your zRam-disk to be?(1-300 Mb)"
  read zRamdisk
  if [ $zRamdisk >= 1 && $zRamdisk <= 300 ]
    echo "zRam-disk-size: " $zRamdisk
    continue=1
  else 
    echo $zRamdisk" is not a valid input, default zRam-disk-size will get used(100)"
    continue=1
    zRamdisk=100
  fi
  sleep 1
done

# swapiness
continue=0
while [ $continue == 0 ]; do
  if [ $zRam == 0 ]; then
    echo "Wich default swapiness do you want, 0-100 is possible?(45)"
    read swapiness
  else if [ $zRam == 1 ]; then
    echo "Wich default swapiness do you want, 0-100 is possible?(70)"
    read swapiness
  fi
  if [ $swapiness >= 0 && $swapiness >= 100 ]; then
    echo "swapiness: "$swapiness
    continue=1
  else
    if [ $zRam == 1 ]; then
      echo $swapiness" is not a valid input, default swapiness will get used"
	swapiness=70
    else 
        echo $swapiness" is not a valid input, default swapiness will get used"
	swapiness=45
    fi
    continue=1
  fi
  sleep 1
done

# governor
continue=0
while [ continue == 0 ]; do
  echo "Wich cpufreq governor do you want to use?"
  echo "Possible governors are: " $(cat /sys/devices/system/cpufreq/cpu1/available_governors)
  read governor
  for word in $(cat /sys/devices/system/cpufreq/cpu1/available_governors); do
    if [ $governor == $word ]; then
      continue=1
    fi
  done
  if [ $continue == 1 ]; then
    echo "governor: "$governor
  else
    echo $governor" is not a valid input."
  fi
  sleep 1
done
    
# I/O schedluer
continue=0
while [ continue == 0 ]; do
  echo "Wich I/O scheduler do you want to use?"
  echo "Possible governors are: " $(cat /sys/devices/system/cpufreq/cpu1/available_governors)
  read governor
  for word in # $(cat /sys/devices/system/cpufreq/cpu1/available_governors); do
    if [ $governor == $word ]; then
      continue=1
    fi
  done
  if [ $continue == 1 ]; then
    echo "governor: "$governor
  else
    echo $governor" is not a valid input."
  fi
  sleep 1
done


 
